import unittest

# Simple example from the docs https://docs.python.org/3/library/unittest.html
class TestStringMethods(unittest.TestCase):

    def test_upper(self):
        self.assertEqual('foo'.upper(), 'FOO')



from flask import Flask, request, Response
import json

app = Flask(__name__)

@app.route('/status', methods=['POST'])
def status():

  data = request.get_json()

  if data['check']['name'] == 'Tests':

    # Simulate running tests
    import time
    time.sleep(5)

    return Response(json.dumps({
      "state": "success"
    }), status=200, mimetype="application/json")#

  else:

    return Response(json.dumps({
      "state": "error", 
      "description": "Unknown check"
    }), status=400, mimetype="application/json")

if __name__ == '__main__':
  app.run(host='0.0.0.0')
